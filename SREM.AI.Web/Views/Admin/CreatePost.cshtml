@{
    // ViewData["Title"] = "Home Page";
    Layout = "~/Views/Admin/_AdminLayout.cshtml";
}
<div class="bg-white px-6 pt-6 border-b" style="position:fixed;width:100%">
    <h1 class="text-2xl font-semibold mb-4">Đăng tin cho thuê</h1>

    <div class="flex space-x-6 text-sm font-medium">
        <button data-scroll="AreaId" class="tab-btn text-orange-600 border-b-2 border-orange-600 pb-2">
            Khu vực
        </button>
        <button data-scroll="DescriptionInformationId" class="tab-btn text-gray-600 hover:text-orange-600 pb-2">
            Thông tin mô tả
        </button>
        <button data-scroll="ImageId" class="tab-btn text-gray-600 hover:text-orange-600 pb-2">
            Hình ảnh
        </button>
        <button data-scroll="VideoId" class="tab-btn text-gray-600 hover:text-orange-600 pb-2">
            Video
        </button>
        <button data-scroll="ContactId" class="tab-btn text-gray-600 hover:text-orange-600 pb-2">
            Thông tin liên hệ
        </button>
    </div>
</div>

<div class="bg-white p-6 rounded ml-20 mr-20 mt-8 border mb-8" style="margin-top:9rem">
    <h2 class="text-lg font-semibold mb-4">Loại chuyên mục</h2>

    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <div>
            <label class="block mb-1 font-medium">
                Loại chuyên mục <span class="text-red-600 font-bold">(∗)</span>
            </label>
            <select class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500">
                <option>-- Chọn loại chuyên mục --</option>
            </select>
        </div>

    </div>
</div>

<div id="AreaId" class="section bg-white p-6 rounded ml-20 mr-20 mt-8 border mb-8">
    <h2 class="text-lg font-semibold mb-4">Khu vực</h2>

    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <div>
            <label class="block mb-1 font-medium">
                Tỉnh/Thành phố <span class="text-red-600 font-bold">(∗)</span>
            </label>
            <select class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500">
                <option>-- Chọn Tỉnh/TP --</option>
            </select>
        </div>

        <div>
            <label class="block mb-1 font-medium">
                Quận/Huyện <span class="text-red-600 font-bold">(∗)</span>
            </label>
            <select class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500">
                <option>-- Chọn quận huyện --</option>
            </select>
        </div>

        <div>
            <label class="block mb-1 font-medium">Phường/Xã</label>
            <select class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500">
                <option>-- Chọn phường xã --</option>
            </select>
        </div>

        <div>
            <label class="block mb-1 font-medium">Đường/Phố</label>
            <select class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500">
                <option>-- Chọn đường phố --</option>
            </select>
        </div>

        <div>
            <label class="block mb-1 font-medium">Số nhà</label>
            <input type="text" placeholder="Nhập số nhà" class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500">
        </div>

        <div>
            <label class="block mb-1 font-medium">Địa chỉ</label>
            <input type="text" placeholder="Địa chỉ" class="w-full border border-gray-300 rounded px-3 py-2 bg-gray-100 text-gray-600 cursor-not-allowed" readonly>
        </div>
    </div>
</div>

<div class="bg-white p-6 rounded ml-20 mr-20 mt-8 border mb-8">
    <h2 class="text-lg font-semibold mb-4">Bản đồ</h2>

    <div class="grid grid-cols-1 md:grid-cols-1 gap-4">
        <div>
            <iframe id="mapFrame"
                    width="100%"
                    height="300"
                    class="rounded border border-gray-300"
                    style="border:0"
                    loading="lazy"
                    allowfullscreen
                    referrerpolicy="no-referrer-when-downgrade"
                    src="https://www.google.com/maps?q=Hà+Nội,+Vietnam&output=embed">
            </iframe>
        </div>

    </div>
</div>

<div id="DescriptionInformationId" class="section bg-white p-6 rounded ml-20 mr-20 mt-8 border mb-8">
    <h2 class="text-lg font-semibold mb-4">Thông tin mô tả</h2>

    <div class="grid grid-cols-1 md:grid-cols-1 gap-4">
        <div>
            <label class="block mb-1 font-medium">
                Tiêu đề <span class="text-red-600 font-bold">(∗)</span>
            </label>
            <textarea class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"></textarea>
        </div>

        <div>
            <label class="block mb-1 font-medium">
                Nội dung mô tả <span class="text-red-600 font-bold">(∗)</span>
            </label>
            <textarea rows="10" class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"></textarea>
        </div>

        <div>
            <label class="block mb-1 font-medium">
                Giá cho thuê <span class="text-red-600 font-bold">(∗)</span>
            </label>
            <div class="w-full" style="width:50%">
                <div class="mt-1 flex rounded-md">
                    <input type="number" id="gia" name="gia"
                           class="flex-1 block w-full rounded-none rounded-l-md border border-gray-300 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 sm:text-sm" />
                    <select class="rounded-none rounded-r-md border border-l-0 border-gray-300 bg-white px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500">
                        <option>đồng/tháng</option>
                        <option>đồng/m<sup>2</sup>/tháng</option>
                    </select>
                </div>
            </div>
        </div>

        <div>
            <label class="block mb-1 font-medium">
                Diện tích <span class="text-red-600 font-bold">(∗)</span>
            </label>
            <div class="w-full" style="width:50%">
                <div class="mt-1 flex rounded-md">
                    <input type="number" id="gia" name="gia"
                           class="flex-1 block w-full rounded-none rounded-l-md border border-gray-300 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 sm:text-sm" />
                    <span class="inline-flex items-center rounded-r-md border border-l-0 border-gray-300 bg-gray-100 px-3 text-sm text-gray-700">
                        m<sup>2</sup>
                    </span>
                </div>
            </div>
        </div>

    </div>
</div>

<div id="ImageId" class="section bg-white p-6 rounded ml-20 mr-20 mt-8 border mb-8">
    <h2 class="text-lg font-semibold mb-4">Hình ảnh</h2>

    <div class="grid grid-cols-1 md:grid-cols-1 gap-4">
        <label for="imageUpload"
               class="flex flex-col items-center justify-center w-full h-56 border-2 border-dashed border-blue-400 rounded-lg bg-blue-50 cursor-pointer hover:bg-blue-100 transition">
            <div class="flex flex-col items-center">
                <img src="~/image/upload-image.png" style="width:60px"/>
                <p class="text-sm text-gray-700">Tải ảnh từ thiết bị</p>
            </div>
            <input id="imageUpload" type="file" class="hidden" multiple accept="image/*">
        </label>
        <ul class="mt-4 text-sm text-gray-600 space-y-1 list-disc list-inside">
            <li>Tải lên tối đa 20 ảnh trong một bài đăng</li>
            <li>Dung lượng ảnh tối đa 10MB</li>
            <li>Hình ảnh phải liên quan đến phòng trọ, nhà cho thuê</li>
            <li>Không chèn văn bản, số điện thoại lên ảnh</li>
        </ul>

        <div id="previewContainer" class="mt-4 grid grid-cols-2 md:grid-cols-4 gap-4"></div>
    </div>
</div>

<div id="VideoId" class="section bg-white p-6 rounded ml-20 mr-20 mt-8 border mb-8">
    <h2 class="text-lg font-semibold mb-4">Video</h2>

    <div class="mb-3">
        <label for="videoLink" class="block text-sm font-medium text-gray-700 mb-1">Video Link (Youtube/Tiktok)</label>
        <input type="url" id="videoLink"
               class="w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent"
               placeholder="https://www.youtube.com/watch?v=..." />
    </div>

    <div class="text-sm text-gray-700 mb-3">
        <strong class="text-black">Lưu ý:</strong> Bạn có thể chọn video từ Youtube hoặc Tiktok để hiển thị trên bài viết của mình.<br />
        <span class="text-blue-700">https://www.youtube.com/watch?v=xxxxxxxxxxx</span><br />
        <span class="text-blue-700">https://www.tiktok.com/username/video</span>
    </div>

    <p class="text-left text-sm text-gray-500 mb-3">Hoặc</p>

    <label for="videoUpload"
           class="flex flex-col items-center justify-center w-full h-56 border-2 border-dashed border-blue-400 rounded-lg bg-blue-50 cursor-pointer hover:bg-blue-100 transition">
        <div class="flex flex-col items-center">

            <img src="~/image/upload-video.png" style="width:60px" />
            <p class="text-sm text-gray-700">Tải Video từ thiết bị</p>
        </div>
        <input id="videoUpload" type="file" class="hidden" accept="video/*">
    </label>
</div>

<div id="ContactId" class="section bg-white p-6 rounded ml-20 mr-20 mt-8 border mb-8">
    <h2 class="text-lg font-semibold mb-4">Thông tin liên hệ</h2>

    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <div>
            <label class="block mb-1 font-medium">
                Họ Tên
            </label>
            <input type="text" class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500">
        </div>

        <div>
            <label class="block mb-1 font-medium">
                Số điện thoại
            </label>
            <input type="text" class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500">
        </div>
    </div>
</div>

<div class="ml-20 mr-20 mb-20">
    <button class="w-full bg-orange-500 hover:bg-orange-600 text-white font-semibold py-2 rounded-full mb-6 transition">
        Tiếp tục
    </button>
</div>
<script>
    //font-bold text-blue-800
    document.getElementById('CreatePostId').classList.add('font-bold', 'text-blue-800');

    const imageUpload = document.getElementById('imageUpload');
    const previewContainer = document.getElementById('previewContainer');
    let isScrollingByClick = false;

    imageUpload.addEventListener('change', () => {
      previewContainer.innerHTML = ""; 
      const files = Array.from(imageUpload.files).slice(0, 20); 

      files.forEach(file => {
        if (!file.type.startsWith("image/")) return;

        const reader = new FileReader();
        reader.onload = () => {
          const img = document.createElement('img');
          img.src = reader.result;
          img.className = "w-full h-32 object-cover rounded-md shadow";
          previewContainer.appendChild(img);
        };
        reader.readAsDataURL(file);
      });
    });

    document.querySelectorAll('.tab-btn').forEach(btn => {
      btn.addEventListener('click', function () {
        document.querySelectorAll('.tab-btn').forEach(b => {
          b.classList.remove('text-orange-600', 'border-b-2', 'border-orange-600');
          b.classList.add('text-gray-600', 'font-semibold');
        });

        this.classList.remove('text-gray-600', 'font-semibold');
        this.classList.add('text-orange-600', 'border-b-2', 'border-orange-600');

        const sectionId = this.getAttribute('data-scroll');
        const sectionEl = document.getElementById(sectionId);
        if (sectionEl) {
          isScrollingByClick = true;
          const offset = 195;
          const y = sectionEl.getBoundingClientRect().top + window.pageYOffset - offset;
          window.scrollTo({ top: y, behavior: 'smooth' });
        }

        setTimeout(() => {
            isScrollingByClick = false;
        }, 600);
      });
    });


    const tabButtons = document.querySelectorAll('.tab-btn');
    const sections = document.querySelectorAll('.section');


    const sectionMap = {};
    tabButtons.forEach(btn => {
      const id = btn.getAttribute('data-scroll');
      sectionMap[id] = btn;
    });

    const observer = new IntersectionObserver(
      (entries) => {
        if (isScrollingByClick) return;

        entries.forEach(entry => {
          if (entry.isIntersecting) {

            tabButtons.forEach(btn => {
              btn.classList.remove('text-orange-600', 'border-b-2', 'border-orange-600');
              btn.classList.add('text-gray-600', 'font-semibold');
            });

            const id = entry.target.getAttribute('id');
            const activeBtn = sectionMap[id];
            if (activeBtn) {
              activeBtn.classList.remove('text-gray-600', 'font-semibold');
              activeBtn.classList.add('text-orange-600', 'border-b-2', 'border-orange-600');
            }
          }
        });
      },
      {
        rootMargin: '-50% 0px -40% 0px', 
        threshold: 0.1
      }
    );

    sections.forEach(section => observer.observe(section));
</script>